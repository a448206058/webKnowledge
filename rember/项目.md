公司项目
蒲公英——社群自动推品工具
https://pugongying-web.tuanzongguan.com/
使用vue2 + vuex + vue-router
负责该项目框架的搭建
使用vue-cli脚手架搭建
使用vuex做状态管理（主要实现了一个类草稿箱、包含添加发布文字、图片、链接的管理）
做了一定的安全防御（使用X-Frame-Option，对链接使用了encodeURIComponent，对输入内容进行了转码，使用了Token）
无埋点数据上报
错误日志上报

node 使用 koa框架
基于 Vite + Typescript + React + mobx + eslint + antd 打造的前端监控项目
使用 docker + jenkins + nginx 实现自动工程化
主要包含PV、UV统计、性能分析和错误日志等功能


### 日志类型有哪些
1. 用户访问日志类型（CUSTOMER_PV）
2. 用户加载页面信息类型（LOAD_PAGE）
3. 接口日志类型（HTTP_LOG）
4. 接口错误日志类型（HTTP_ERROR）
5. JS报错日志类型（JS_ERROR）
6. 截屏类型（SCREEN_SHOT）
7. 用户的行为类型（ELE_BEHAVIOR）
8. 静态资源类型（RESOURCE_LOAD）

### 唯一标识和用户ID怎么定的
唯一标识customerKey 16位随机数
页面的唯一标识pageKey 16位随机数
用户ID由用户通过localStorage.wmUserInfo主动设置{userId}或者空

### CUSTOMER_PV包含哪些值
uploadType 上传类型
pageKey 页面唯一标识
deviceName 设备名称
  通过navigator.userAgent获取标识
  如果是iphone通过屏幕，名称获取deviceName
os 设备版本
  通过navigator.userAgent
browserName 
  通过navigator.userAgent
browserVersion
  通过navigator.userAgent
monitorIp  用户的IP地址
  为''
country 用户所在国家
  为'china'
province 用户所在省份
  为 ''
city 用户所在城市
  为 ''
loadType 用以区分首次加载
  performance.getEntries[0].type == 'navigate' 为 true 是首次加载 load
  false 不是 reload
loadTime

### LOAD_PAGE用户加载页面信息
uploadType  上传类型

loadType 区分首次加载  performance.getEntries[0] === 'navigate'

loadPage  performance.loadEventEnd - performance.navigationStart  页面加载完成的时间

domReady performance.domComplete - performance.responseEnd 解析DOM树结构的时间

redirect  performance.redirectEnd - performance.redirectStart  重定向的时间

lookupDomain  performance.domainLookupEnd - performanceupStart DNS查询时间

ttfb  performance.responseStart - performance.requestStart  内容加载完成的时间

loadEvent  performance.loadEventEnd - performance.loadEventStart  执行onload回调函数的时间

appcache  performance.domainLookupStart - performance.fetchStart  DNS 缓存时间 

connnect  performance.connectEnd - performance.connectStart TCP建立连接完成握手的时间

### ELE_BEHAVIOR 行为日志
uploadType  上传类型

behaviorType   行为类型 大部分为 'click'

className  e.target.className  标签 样式名

placeholder e.target.placeholder || '' 标签 提示信息

inputValue  e.target.value || ''  输入值

tagName  e.target.tagName  标签名

innerText  e.target.innerText 插入文本

### JS_ERROR
uploadType  上传类型

pageKey  页面唯一标识

deviceName  设备名称

os  系统版本

browserName  浏览器名称  通过navigator.userAgent

browserVersion  浏览器版本 通过navigator.userAgent

monitorIp  用户IP地址

country  用户所在国家

province  用户所在省份

city  用户所在城市

errorMessage   window.onerror  = function(errorMsg)  错误信息

errorStack function (errorMsg, url, lineNumber, columnNumber, errorObj)  错误栈

browserInfo   浏览器信息

### 接口请求日志 HTTP_LOG
通过监听 ajaxLoadStart  ajaxLoadEnd

uploadType  上传类型

httpUrl  请求地址  event.detail.responseURL

status  状态码  event.detail.status

statusText 状态文本 event.detail.statusText

statusResult '发起请求' | '请求返回'

happenTime  当前时间

loadTime 请求时间  当前时间 - 监听到的时间


### SCREEN_SHOT 屏幕截图
uploadType  上传类型

description 描述

screenInfo 屏幕信息

imgType  图片信息


### RESOURCE_LOAD 资源加载
uploadType  上传类型

elementType  e.target.localName

sourceUrl  e.target.href || e.target.src

status  error(0)  

### 何时触发上传接口？
点击
链接跳转
报错